Assignment: ORM Supplementary Assignment

This assignment aims to evaluate your proficiency in Hibernate Query Language (HQL),
understanding of cascade operations, and the usage of the @JoinColumn annotation.

    @Entity:
Annotation used to mark a Java class as a persistent entity. This means that instances of this class will be mapped to database tables.
Indicates that the class is an entity and is managed by JPA.

    @Id:
Annotation used to mark a field or property of an entity class as the primary key.
Indicates that the field or property is uniquely identifying each entity instance within the table.

    @GeneratedValue:
Annotation used to specify the generation strategy for the values of the primary key.
Typically applied to the primary key field or property and indicates that the value of the primary key will be generated automatically by the persistence provider.

    @OneToMany:
Annotation used to define a one-to-many relationship between two entities.
Indicates that one instance of the source entity (annotated with @OneToMany) can be associated with multiple instances of the target entity.
Typically used to map a collection-valued attribute in the source entity that references multiple instances of the target entity.

    @ManyToOne:
Annotation used to define a many-to-one relationship between two entities.
Indicates that many instances of the source entity can be associated with one instance of the target entity.
Typically applied to a field or property in the source entity that represents the association with the target entity.

    @Id:
@GeneratedValue(strategy = GenerationType.IDENTITY):
The @GeneratedValue annotation, along with @Id, is used to specify how the primary key values for entities are generated. @GeneratedValue is used to define 
the generation strategy, while @Id marks the field or property as the primary key.
When @GeneratedValue is used with GenerationType.IDENTITY, it indicates that the primary key values will be generated by the underlying database. 
This strategy typically relies on an auto-increment column in the database, where each new record inserted into the table is assigned a unique, 
incrementing value for the primary key.

    @OneToMany(mappedBy = "author", cascade = CascadeType.ALL, orphanRemoval = true):
The @OneToMany(mappedBy = "author", cascade = CascadeType.ALL, orphanRemoval = true) annotation in JPA is used to define a one-to-many relationship 
between two entities (Author and Book). It indicates that each Author can have multiple Book entities associated with it.

mappedBy = "author" specifies that the Author entity owns the relationship, and it's mapped by the author field in the Book entity.
cascade = CascadeType.ALL specifies that all operations (e.g., persist, merge, remove) performed on an Author entity should be cascaded to its associated Book entities.
orphanRemoval = true specifies that if a Book entity is removed from the collection of books associated with an Author, and it's not referenced by any other entity, 
it should be automatically deleted from the database.

    @JoinColumn(name = "author_id"):
The @JoinColumn(name = "author_id") annotation in JPA is used to specify the name of the foreign key column in the database table 
that is associated with the owning side of the relationship.
In the context of a one-to-many or many-to-one relationship, it's typically used on the owning side of the relationship.

Q1:

"SELECT id, price, pubYear, title FROM Book WHERE pubYear > ?1"

Q2:

"UPDATE Book b SET b.price = b.price * 1.1 WHERE b.author.id = ?1"

Q3: 

public static void deleteAuthorAndBooks(int authorId) {
        Session session = FactoryConfiguration.getInstance().getSession();
        Transaction transaction = session.beginTransaction();

        Author author = session.get(Author.class, authorId);
        if (author != null) {
            session.delete(author);
        }
        transaction.commit();
        session.close();
    }

Q4:

"SELECT AVG(b.price) FROM Book b"

Q5:

"SELECT a, COUNT(b) FROM Author a JOIN a.books b GROUP BY a.id"

Q6:

"SELECT b FROM Book b JOIN b.author a WHERE a.country = : country"

Q7:

@JoinColumn(name = "author_id"): 
This annotation specifies the foreign key column that maps the association between the Book and Author entities. 
The name attribute specifies the name of the foreign key column in the Book table.

Q10:

"SELECT a FROM Author a WHERE size(a.books) > (SELECT AVG(size(b.books)) FROM Author b)"







